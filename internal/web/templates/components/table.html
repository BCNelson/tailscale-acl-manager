{{define "table"}}
{{- $columns := .Columns -}}
{{- $rows := .Rows -}}
{{- $actions := .Actions -}}
{{- $emptyMessage := .EmptyMessage -}}
{{if $rows}}
<table>
  <thead>
    <tr>
      {{range $columns}}
      <th>{{.Label}}</th>
      {{end}}
      {{if $actions}}
      <th class="text-right">Actions</th>
      {{end}}
    </tr>
  </thead>
  <tbody>
    {{range $rows}}
    <tr>
      {{$row := .}}
      {{range $columns}}
      <td>
        {{if .Mono}}<code class="font-mono">{{end}}
        {{index $row .Key}}
        {{if .Mono}}</code>{{end}}
      </td>
      {{end}}
      {{if $actions}}
      <td class="table-actions">
        {{range $actions}}
        {{if eq .Type "link"}}
        <a href="{{.URL $row}}" class="btn btn-sm btn-secondary">{{.Label}}</a>
        {{else if eq .Type "edit"}}
        <a href="{{.URL $row}}" class="btn btn-sm btn-secondary" hx-get="{{.URL $row}}" hx-target="#modal-content" hx-swap="innerHTML" onclick="openModal('modal', 'Edit')">Edit</a>
        {{else if eq .Type "delete"}}
        <button class="btn btn-sm btn-danger" onclick="confirmDelete('{{.Confirm}}', '{{.URL $row}}')">Delete</button>
        {{end}}
        {{end}}
      </td>
      {{end}}
    </tr>
    {{end}}
  </tbody>
</table>
{{else}}
<div class="empty-state">
  <p>{{if $emptyMessage}}{{$emptyMessage}}{{else}}No items found.{{end}}</p>
</div>
{{end}}
{{end}}
